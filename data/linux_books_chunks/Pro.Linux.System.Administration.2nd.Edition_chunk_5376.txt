The -p option specifies the port (the plug-in 
defaults to port 25), and we pass in this value as the $ARG1$ macro.

You can see a service alert generated by this service from the nagios.log log file here:

[1481325559] SERVICE ALERT: gateway.example.com;Check SMTP;CRITICAL;HARD;4; 
CRITICAL - Socket timeout after 10 seconds

The nagios.log entry specifies the Unix epoch time (1481325559, or Fri Dec 9 23:19:19 UTC 2016), 

the type of alert, the host and service, and the nature of the alert including the output from the plug-in.

 ■ Note 

 You can convert epoch time from the command line: date --date='@1235270465'.

894

Chapter 18 ■ Logging and Monitoring

REMOTE MONITORING

So far you’ve seen only how to monitor services on a local host, such as our local disk, or services 
that are accessible via the network, such as SMtp, iMap, or SSh.